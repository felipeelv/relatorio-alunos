<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Relatório 360º com Texto e Escala Likert</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    .container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 8px; }
    h1, h2, h3 { text-align: center; }
    label { display: block; font-weight: bold; margin-top: 20px; }
    input[type="text"] { width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 20px; }
    .section { margin-top: 40px; }
    .likert-group { display: flex; justify-content: space-between; margin: 10px 0; }
    .likert-group label { flex: 1; text-align: center; font-weight: normal; }
    .likert-group input { display: block; margin: auto; }
    .btn { display: block; margin: 30px auto; padding: 10px 20px; background: #007BFF; color: white; border: none; border-radius: 4px; cursor: pointer; }
    .btn:hover { background: #0056b3; }
    .chart-container { margin: 40px 0; }
    @media print { .no-print { display: none; } }
  </style>
</head>
<body>
<div class="container">
  <h1>Relatório 360º - Avaliação Pedagógica</h1>
  <div class="no-print">
    <label>Nome do Aluno:</label><input type="text" id="aluno">
    <label>Turma/Série:</label><input type="text" id="turma">
    <label>Professor(a):</label><input type="text" id="professor">
    <label>Bimestre:</label><input type="text" id="bimestre" value="2º Bimestre">
    <label>Ano Letivo:</label><input type="text" id="ano" value="2025">
    <div id="formulario"></div>
    <button class="btn" onclick="gerarRelatorio()">Gerar Relatório</button>
  </div>

  <div id="resultado" style="display:none">
    <h2>Avaliação 360º</h2>
    <canvas id="graficoRadar" class="chart-container"></canvas>
    <div id="analisesTextuais"></div>
    <button onclick="window.print()" class="btn">Imprimir / Salvar como PDF</button>
  </div>
</div>

<script>
const competencias = {
  "Língua Portuguesa": [
    "Domínio da leitura e compreensão textual",
    "Produção escrita e estruturação textual",
    "Conhecimentos ortográficos",
    "Análise morfossintática",
    "Uso da pontuação e recursos expressivos"
  ],
  "Matemática": [
    "Compreensão do sistema de numeração decimal",
    "Resolução de problemas com operações básicas",
    "Grandezas e medidas",
    "Raciocínio geométrico e espacial",
    "Organização e interpretação de dados"
  ],
  "Ciências": [
    "Aplicação do método científico",
    "Compreensão de fenômenos físicos",
    "Órgãos sensoriais e percepção",
    "Seres vivos e relações ecológicas",
    "Consciência ambiental e sustentabilidade"
  ],
  "Estudos Sociais": [
    "Transformações espaciais e temporais",
    "Diversidade social e cultural",
    "Paisagens e representações espaciais",
    "Relações sociedade-natureza",
    "Cidadania e espaços públicos"
  ],
  "Socioemocional": [
    "Autoconhecimento",
    "Autorregulação",
    "Relacionamento e empatia",
    "Comunicação",
    "Responsabilidade e autonomia",
    "Participação e engajamento",
    "Valores e atitudes"
  ]
};

function criarFormulario() {
  const container = document.getElementById("formulario");
  for (const area in competencias) {
    const sec = document.createElement("div");
    sec.className = "section";
    const h2 = document.createElement("h2");
    h2.textContent = area;
    sec.appendChild(h2);

    competencias[area].forEach(criterio => {
      const group = document.createElement("div");
      const label = document.createElement("label");
      label.textContent = criterio;
      group.appendChild(label);

      const likert = document.createElement("div");
      likert.className = "likert-group";

      for (let i = 1; i <= 5; i++) {
        const sublabel = document.createElement("label");
        const radio = document.createElement("input");
        radio.type = "radio";
        radio.name = area + "_" + criterio;
        radio.value = i;
        radio.dataset.area = area;
        radio.dataset.criterio = criterio;
        sublabel.appendChild(radio);
        sublabel.appendChild(document.createTextNode(i));
        likert.appendChild(sublabel);
      }
      group.appendChild(likert);
      sec.appendChild(group);
    });
    container.appendChild(sec);
  }
}

function gerarRelatorio() {
  const dados = {};
  const radios = document.querySelectorAll("input[type='radio']:checked");
  radios.forEach(radio => {
    const area = radio.dataset.area;
    const criterio = radio.dataset.criterio;
    const nota = parseInt(radio.value);
    if (!dados[area]) dados[area] = {};
    dados[area][criterio] = nota;
  });

  const labels = Object.keys(dados);
  const medias = labels.map(area => {
    const notas = Object.values(dados[area]);
    return notas.reduce((a, b) => a + b, 0) / notas.length;
  });

  new Chart(document.getElementById("graficoRadar"), {
    type: 'radar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Avaliação Geral por Área',
        data: medias,
        backgroundColor: 'rgba(54,162,235,0.2)',
        borderColor: '#36a2eb'
      }]
    },
    options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
  });

  const analisesDiv = document.getElementById("analisesTextuais");
  analisesDiv.innerHTML = "<h2>Análises por Área</h2>";
  labels.forEach((area, index) => {
    const media = medias[index];
    let texto = "<h3>" + area + "</h3><p>";
    if (media >= 4.5) {
      texto += "O aluno demonstrou excelente domínio nas competências desta área, com alto desempenho em praticamente todos os critérios.";
    } else if (media >= 3.5) {
      texto += "Apresenta bom desenvolvimento geral, com pontos fortes bem definidos, embora ainda haja espaço para aprimoramento.";
    } else if (media >= 2.5) {
      texto += "O desempenho está em processo de consolidação. Recomenda-se acompanhamento para fortalecer habilidades essenciais.";
    } else {
      texto += "Necessita de apoio pedagógico contínuo para superar dificuldades identificadas nos critérios desta área.";
    }
    texto += "</p>";
    analisesDiv.innerHTML += texto;
  });

  document.getElementById("resultado").style.display = "block";
  window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
}

criarFormulario();
</script>
</body>
</html>
